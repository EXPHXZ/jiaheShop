<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>售后页面</title>
    <link rel="stylesheet" href="../css/aftermarket.css">

</head>

<body>
<div id="app">
    <div class="tableDiv">
        <template>
            <h3>申请售后</h3>
            <el-table
                    :data="tableData"
                    style="width: 100%">
                <el-table-column
                        prop="commodityName"
                        label="商品名">
                </el-table-column>
                <el-table-column
                        prop="image"
                        label="商品图片">
                </el-table-column>
                <el-table-column
                        prop="brandName"
                        label="品牌名">
                </el-table-column>
                <el-table-column
                        prop="count"
                        label="数量">
                </el-table-column>
            </el-table>
        </template>
    </div>


    <div class="blankDiv">

    </div>


    <el-form ref="form" :model="form" label-width="80px">
        <el-form-item label="服务类型:">
            <el-radio-group v-model="form.type">
                <el-radio label="维修" name="维修"></el-radio>
            </el-radio-group>
        </el-form-item>
        <el-form-item label="提交原因:">
            <el-select v-model="form.cause" placeholder="请选择活动区域">
                <el-option label="商品质量" value=0></el-option>
                <el-option label="货不对板" value=1></el-option>
            </el-select>
        </el-form-item>
        <el-form-item label="问题描述:">
            <el-input type="textarea" v-model="form.description"></el-input>
        </el-form-item>
        <el-form-item
                label="图片信息:"
                prop="image"
        >
            <el-upload
                    action="/common/upload"
                    list-type="picture-card"
                    :on-preview="handlePictureCardPreview"
                    :on-remove="handleRemove"
                    :on-success="getAddFileName"
            >
                <i class="el-icon-plus"></i>
            </el-upload>
            <el-dialog :visible.sync="innerVisible" append-to-body>
                <img width="100%" :src="dialogImageUrl" alt="">
            </el-dialog>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="onSubmit">立即创建</el-button>
            <el-button>取消</el-button>
        </el-form-item>
    </el-form>

</div>

<script src="../js/vue.js"></script>
<script src="../element-ui/lib/index.js"></script>
<script src="../js/axios-0.18.0.js"></script>
<link rel="stylesheet" href="../element-ui/lib/theme-chalk/index.css">

<script>
    new Vue({
        el: "#app",
        data() {
            return {
                tableData: [
                    {
                        commodityName:"测试",
                        image:"测试图片"
                        ,brandName:"测试"
                        ,count:1}
                ],
                form: {

                },

                innerVisible:false,

                dialogImageUrl: '',
            }
        },
        methods: {
            onSubmit() {
                axios.post("/aftermarket/add").then((res)=>{
                    if(res.data.Code == 20021){
                        this.from = res.data.data;
                        this.$message.success(res.data.msg)
                    }
                    else
                        this.$message.fail(res.data.msg)
                }).finally(
                    ()=>{
                        this.selectAll();
                    }
                )
            },
            getAddFileName(response){
                console.log(response)
                this.addCommodity.image=response
                console.log(this.addCommodity)
            },
            handleRemove(file, fileList) {
                console.log(file, fileList);
            },

            handlePictureCardPreview(file) {
                this.dialogImageUrl = file.url;
                this.innerVisible = true;
            },
        },
        created(){

        }
    })
</script>

</body>

</html>